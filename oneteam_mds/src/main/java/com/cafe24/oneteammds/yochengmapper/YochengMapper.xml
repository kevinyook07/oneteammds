<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mapper namespace 설정 -->  
<mapper namespace="com.cafe24.oneteammds.yochengmapper.YochengMapper">
	
	<!-- 전체 리스트, select 쿼리문 입력, resultType 설정 -->
	<!-- limit 0,10은 한 페이지에 게시글을 10개만 보여주게 함. -->
	<select	id="getYochengAdminList" 
 			resultType="com.cafe24.oneteammds.yochengvo.Yochenglist">
	
		SELECT
			yochengCode
			, yochengoutHospitalId
			, yochengoutHospitalName
			, yochenginHospitalId
			, yochenginHospitalName
			, patientId
			, patientName
			, yochengJinlyoCode
			, yochengDate
			, yochengSayu
		FROM 
			yochenglist
		ORDER BY yochengCode ASC 
		LIMIT #{startRow},#{rowPerPage} <!-- currentPage에서 startRow로 바꾸니까 정상 출력 -->
	
	</select>
	
	<!-- 페이지 처리를 위한 전체행의 갯수 -->
	<select id="getYochengAdminListAllCount" resultType="int">
		select
			count(*)
		From 
			yochenglist

	</select>	
	
	<!-- <select id="getYochengCode" parameterType="int" resultType="com.cafe24.oneteammds.yochengvo.Yochenglist">
		SELECT 
 			yochengCode
			, yochengoutHospitalId
			, yochengoutHospitalName
			, yochenginHospitalId
			, yochenginHospitalName
			, patientId
			, patientName
			, yochengJinlyoCode
			, yochengDate
			, yochengSayu
		FROM 
			yochenglist
		where				
			yochengCode = #{yochengCode}
	</select> -->
	
	
	<!-- select 쿼리문 입력, parameterType=String 설정, resultType 설정 -->
	<select	id="getYochengAdminListSearch" parameterType="String"
 			resultType="com.cafe24.oneteammds.yochengvo.Yochenglist">
	
		SELECT
			yochengCode
			, yochengoutHospitalId
			, yochengoutHospitalName
			, yochenginHospitalId
			, yochenginHospitalName
			, patientId
			, patientName
			, yochengJinlyoCode
			, yochengDate
			, yochengSayu
		FROM 
			yochenglist
		<if test="sk1 != null and sv1 neq ''.toString()">
			where
				${sk1} like concat('%',#{sv1}, '%')		
		</if>	
	
	</select>
	
	<select id="getYochenglist_ById"
 			parameterType="String"
 			resultType="com.cafe24.oneteammds.yochengvo.Yochenglist">
		SELECT 
 			yochengCode
			, yochengoutHospitalId
			, yochengoutHospitalName
			, yochenginHospitalId
			, yochenginHospitalName
			, patientId
			, patientName
			, yochengJinlyoCode
			, yochengDate
			, yochengSayu
		FROM 
			yochenglist
		where				
			patientId = #{patientId}
 	</select>
	
	
	
	<!-- 관리자에서 병원으로 요청 내역 전송 -->
	<insert id="getYochengAdminInsert"
 		    parameterType="com.cafe24.oneteammds.yochengvo.Yochenglist">
 	INSERT INTO 
 			susinHospitalList
		SELECT
			yochengCode
			, yochengoutHospitalId
			, yochengoutHospitalName
			, yochenginHospitalId
			, yochenginHospitalName
			, patientId
			, patientName
			, yochengJinlyoCode
			, yochengDate
			, yochengSayu
		FROM 
			yochenglist
		WHERE 
			patientId = #{patientId}
	</insert>
	
	
	
	
	
	
	

</mapper>